# Internationalization (i18n) in ripgrep

ripgrep now supports internationalization of its help text and user-facing messages.

## Supported Locales

Currently, the following locales are supported:

- English (en-US) - Default
- Chinese Simplified (zh-CN)

## Setting the Locale

ripgrep detects your preferred locale from environment variables in the following order:

1. `RG_LANG` - ripgrep-specific locale setting
2. `LC_ALL` - System-wide locale override
3. `LC_MESSAGES` - Locale for messages specifically
4. `LANG` - General locale setting

### Examples

```bash
# Use Chinese help text
RG_LANG=zh-CN rg --help

# Or using standard locale variables
LANG=zh_CN.UTF-8 rg --help
LC_MESSAGES=zh-CN rg -h
```

## Fallback Behavior

If the requested locale is not available, ripgrep will automatically fall back to English (en-US).

## Translation Files

Translation files are stored in the `locales/` directory in Fluent format (`.ftl` files):

```
locales/
├── en-US/
│   └── main.ftl
└── zh-CN/
    └── main.ftl
```

## Contributing Translations

To add a new language:

1. Create a new directory under `locales/` with the language code (e.g., `locales/fr-FR/`)
2. Copy `locales/en-US/main.ftl` to your new directory
3. Translate the messages in the `.ftl` file
4. Test your translation with `RG_LANG=<your-locale> rg --help`

### Translation Guidelines

- Keep formatting consistent with the English version
- Preserve technical terms and command names (e.g., `rg`, `PATTERN`, `PATH`)
- Maintain the same level of formality
- Test that the translated help fits well in terminal displays

## Technical Details

The i18n implementation uses:

- [Fluent](https://projectfluent.org/) - Mozilla's localization system
- `fluent-bundle` - Core Fluent implementation in Rust
- `fluent-langneg` - Language negotiation for selecting best available locale
- `unic-langid` - Unicode language identifier handling

The localization system is initialized once at startup and uses concurrent-safe data structures for thread safety.
