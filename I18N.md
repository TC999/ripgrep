# Internationalization (i18n) in ripgrep

This document describes how to use and extend the internationalization support in ripgrep.

## Usage

ripgrep automatically detects your system language from environment variables:

- `LANG`: Primary language setting (e.g., `LANG=zh_CN.UTF-8`)
- `LC_ALL`: Override for all locale categories (e.g., `LC_ALL=ja_JP.UTF-8`)

### Examples

```bash
# Use English (default)
rg pattern

# Use Chinese (Simplified)
LANG=zh_CN.UTF-8 rg pattern

# Use Japanese  
LANG=ja_JP.UTF-8 rg pattern

# Override with LC_ALL
LC_ALL=zh_CN.UTF-8 rg pattern
```

## Supported Languages

Currently supported languages:

- **en-US**: English (default/fallback)
- **zh-CN**: Chinese (Simplified)
- **ja-JP**: Japanese

## Adding New Languages

To add support for a new language:

1. Create a new directory in `i18n/` with the language code (e.g., `i18n/fr-FR/`)
2. Create a `ripgrep.ftl` file in that directory
3. Add the language to `i18n.toml` under `[languages]`
4. Translate all the message keys from the English version

### Translation File Format

Translation files use the Fluent format (`.ftl`). Example:

```fluent
pattern_required = Your translated message here
pattern_invalid_utf8 = Another translated message
# ... more translations
```

### Available Translation Keys

- `pattern_required`: Error when no search pattern is provided
- `pattern_invalid_utf8`: Error when pattern is not valid UTF-8
- `no_files_searched`: Warning when no files were searched
- `no_files_searched_debug`: Help text for debugging file filtering
- `stats_matches`: Statistics label for matches
- `stats_matched_lines`: Statistics label for matched lines
- `stats_files_with_matches`: Statistics label for files with matches
- `stats_files_searched`: Statistics label for files searched
- `stats_bytes_printed`: Statistics label for bytes printed
- `stats_bytes_searched`: Statistics label for bytes searched
- `stats_search_time`: Statistics label for search time
- `stats_process_time`: Statistics label for process time

## Technical Details

The i18n system uses:

- `i18n-embed`: Core internationalization framework
- `i18n-embed-fl`: Fluent localization macros
- `fluent`: Fluent localization system
- `rust-embed`: Embedding translation files into the binary

### Architecture

- `crates/core/i18n.rs`: Core i18n module with language loader
- `i18n.toml`: Configuration file for supported languages
- `i18n/*/ripgrep.ftl`: Translation files for each language
- `fl!()` macro: Used throughout the codebase for localized strings

The system automatically falls back to English if a requested language is not available or if a specific translation key is missing.